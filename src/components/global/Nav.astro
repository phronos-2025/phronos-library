---
import Logo from './Logo.astro';

interface Props {
  currentPage?: 'library' | 'article';
}

const { currentPage = 'library' } = Astro.props;
---

<nav class="nav">
  <a href="https://phronos.org" class="nav-logo-group">
    <Logo size={31} />
    <span class="nav-wordmark">Phronos</span>
  </a>

  <ul class="nav-links">
    <li><a href="https://phronos.org/dispatches" class="nav-link">Dispatches</a></li>
    <li><a href="/library/" class="nav-link nav-link--active">Library</a></li>
    <li><a href="https://phronos.org/methods" class="nav-link">Methods</a></li>
    <li><a href="https://instruments.phronos.org" class="nav-link">Instruments</a></li>
  </ul>

  <a href="#updates" class="nav-subscribe nav-subscribe-desktop">
    Updates
  </a>

  <button class="nav-hamburger" aria-label="Open menu">
    <span></span>
    <span></span>
    <span></span>
  </button>
</nav>

<!-- Mobile Menu -->
<div class="nav-mobile-menu">
  <div class="nav-mobile-header">
    <a href="https://phronos.org" class="nav-logo-group">
      <Logo size={31} />
      <span class="nav-wordmark">Phronos</span>
    </a>
    <button class="nav-mobile-close" aria-label="Close menu"></button>
  </div>

  <div class="nav-mobile-links">
    <a href="https://phronos.org/dispatches" class="nav-mobile-link">Dispatches</a>
    <a href="/library/" class="nav-mobile-link nav-mobile-link--active">Library</a>
    <a href="https://phronos.org/methods" class="nav-mobile-link">Methods</a>
    <a href="https://instruments.phronos.org" class="nav-mobile-link">Instruments</a>
  </div>

  <a href="#updates" class="nav-mobile-subscribe">
    Updates
  </a>
</div>

<script>
  function initNav() {
    const hamburger = document.querySelector('.nav-hamburger');
    const mobileMenu = document.querySelector('.nav-mobile-menu');
    const closeBtn = document.querySelector('.nav-mobile-close');

    hamburger?.addEventListener('click', () => {
      mobileMenu?.classList.add('is-open');
      document.body.style.overflow = 'hidden';
    });

    closeBtn?.addEventListener('click', () => {
      mobileMenu?.classList.remove('is-open');
      document.body.style.overflow = '';
    });

    // Close menu when clicking a link
    const mobileLinks = document.querySelectorAll('.nav-mobile-link:not(.disabled), .nav-mobile-subscribe');
    mobileLinks.forEach((link) => {
      link.addEventListener('click', () => {
        mobileMenu?.classList.remove('is-open');
        document.body.style.overflow = '';
      });
    });
  }

  initNav();
  document.addEventListener('astro:after-swap', initNav);
</script>

<style>
  @import '../../styles/components/nav.css';

  .nav-link--active {
    border-bottom-color: var(--gold);
  }

  .nav-mobile-link--active {
    color: var(--gold);
  }
</style>
